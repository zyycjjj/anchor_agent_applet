{"version":3,"sources":["webpack:///G:/uni-app/jjr-wx/wxcomponents/hch-poster/hch-poster.vue?8ef2","webpack:///G:/uni-app/jjr-wx/wxcomponents/hch-poster/hch-poster.vue?eefb","webpack:///G:/uni-app/jjr-wx/wxcomponents/hch-poster/hch-poster.vue?685d","webpack:///G:/uni-app/jjr-wx/wxcomponents/hch-poster/hch-poster.vue?5124","webpack:///G:/uni-app/jjr-wx/wxcomponents/hch-poster/hch-poster.vue","webpack:///G:/uni-app/jjr-wx/wxcomponents/hch-poster/hch-poster.vue?6ec4","webpack:///G:/uni-app/jjr-wx/wxcomponents/hch-poster/hch-poster.vue?0914"],"names":["data","props","canvasFlag","type","Boolean","default","posterObj","Object","url","icon","title","discountPrice","orignPrice","code","methods","roundRect","ctx","x","y","w","h","r","fillColor","strokeColor","btn","beginPath","arc","Math","PI","moveTo","lineTo","grd","createLinearGradient","addColorStop","setFillStyle","fill","setStrokeStyle","stroke","closePath","clip","canvasMultiLineText","text","contentWidth","lineNumber","textArray","split","temp","row","i","length","measureText","width","push","rowCut","slice","rowPart","test","empty","a","group","splice","codeImg","Promise","resolve","reject","request","method","header","version","$parent","globalData","scene","sku","page","then","res","fsm","wx","getFileSystemManager","FILE_BASE_NAME","filePath","env","USER_DATA_PATH","writeFile","encoding","success","fail","uni","showToast","duration","message","catch","createCanvasImage","console","log","showLoading","_this","phoneData","getSystemInfoSync","phoneH","windowHeight","phoneW","windowWidth","scaleW","scaleH","createCanvasContext","zpPriceIcon","closeBtn","draw","save","restore","getImageInfo","src","drawImage","path","setTimeout","setGlobalAlpha","setFontSize","font","contentTextY","leftSpace","textLineHeight","b","fillText","zpPrice","zpPriceW","orignPriceW","hideLoading","saveCanvasImage","canvasToTempFilePath","height","destWidth","destHeight","canvasId","saveImageToPhotosAlbum","tempFilePath","res2","canvasCancelEvn","$emit"],"mappings":"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","file":"wxcomponents/hch-poster/hch-poster.js","sourcesContent":["import { render, staticRenderFns, recyclableRender, components } from \"./hch-poster.vue?vue&type=template&id=05db8bd1&\"\nvar renderjs\nimport script from \"./hch-poster.vue?vue&type=script&lang=js&\"\nexport * from \"./hch-poster.vue?vue&type=script&lang=js&\"\nimport style0 from \"./hch-poster.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\runtime\\\\componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\vue-hot-reload-api\\\\dist\\\\index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!api.isRecorded('05db8bd1')) {\n      api.createRecord('05db8bd1', component.options)\n    } else {\n      api.reload('05db8bd1', component.options)\n    }\n    module.hot.accept(\"./hch-poster.vue?vue&type=template&id=05db8bd1&\", function () {\n      api.rerender('05db8bd1', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"G:/uni-app/jjr-wx/wxcomponents/hch-poster/hch-poster.vue\"\nexport default component.exports","export * from \"-!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\templateLoader.js??vue-loader-options!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--16-0!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\template.js!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-uni-app-loader\\\\page-meta.js!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./hch-poster.vue?vue&type=template&id=05db8bd1&\"","var components\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./hch-poster.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./hch-poster.vue?vue&type=script&lang=js&\"","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nexport default{\n\tdata(){\n\t\treturn{\n\t\t\t\n\t\t}\n\t},\n\tprops:{\n\t\tcanvasFlag:{\n\t\t\ttype:Boolean,\n\t\t\tdefault:true,\n\t\t},\n\t\tposterObj:{\n\t\t\ttype:Object,\n\t\t\tdefault:{\n\t\t\t\turl:'https://img0.zuipin.cn/mp_zuipin/poster/hch-pro.jpg',//商品主图\n\t\t\t\ticon:'https://img0.zuipin.cn/mp_zuipin/poster/hch-hyj.png',//会员价图标\n\t\t\t\ttitle:\"诗酒茶系列 武夷大红袍 2018年 花香型中火 一级 体验装 16g\",//标题\n\t\t\t\tdiscountPrice:\"250.00\",//折后价格\n\t\t\t\torignPrice:\"300.00\",//原价\n\t\t\t\tcode:'https://img0.zuipin.cn/mp_zuipin/poster/hch-code.png',//小程序码\n\t\t\t}\n\t\t}\n\t},\n\tmethods:{\n\t\t// 海报\n\t\t// 画圆角矩形 ctx、x起点、y起点、w宽度、h高度、r圆角半径、fillColor填充颜色、strokeColor边框颜色\n\t\troundRect(ctx, x, y, w, h, r, fillColor, strokeColor,btn) {\n\t\t\t// 开始绘制\n\t\t\tctx.beginPath()\n\t\t\t// 绘制左上角圆弧 Math.PI = 180度\n\t\t\t// 圆心x起点、圆心y起点、半径、以3点钟方向顺时针旋转后确认的起始弧度、以3点钟方向顺时针旋转后确认的终止弧度\n\t\t\tctx.arc(x + r, y + r, r, Math.PI, Math.PI * 1.5)\n\t\t\t// 绘制border-top\n\t\t\t// 移动起点位置 x终点、y终点\n\t\t\tctx.moveTo(x + r, y)\n\t\t\t// 画一条线 x终点、y终点\n\t\t\tctx.lineTo(x + w - r, y)\n\t\t\t// 绘制右上角圆弧\n\t\t\tctx.arc(x + w - r, y + r, r, Math.PI * 1.5, Math.PI * 2)\n\t\t\t// 绘制border-right\n\t\t\tctx.lineTo(x + w, y + h - r)\n\t\t\t// 绘制右下角圆弧\n\t\t\t\n\t\t\tctx.arc(x + w - r, y + h - r, r, 0, Math.PI * 0.5)\n\t\t\n\t\t\t// 绘制左下角圆弧\n\t\t\t\n\t\t\tctx.arc(x + r, y + h - r, r, Math.PI * 0.5, Math.PI)\n\t\t\t\n\t\t\t// 绘制border-left\n\t\t\tctx.lineTo(x, y + r)\n\t\t\tif(btn=='btn'){\n\t\t\t\tconst grd = ctx.createLinearGradient(0, 0, 200, 0)//渐变色\n\t\t\t\tgrd.addColorStop(0, fillColor)\n\t\t\t\tgrd.addColorStop(1, strokeColor)\n\t\t\t\t// 因为边缘描边存在锯齿，最好指定使用 transparent 填充\n\t\t\t\tctx.setFillStyle(grd)\n\t\t\t\t// 对绘画区域填充\n\t\t\t\tctx.fill()\n\t\t\t}else{\n\t\t\n\t\t\t\tif (fillColor) {\n\t\t\t\t// 因为边缘描边存在锯齿，最好指定使用 transparent 填充\n\t\t\t\tctx.setFillStyle(fillColor)\n\t\t\t\t// 对绘画区域填充\n\t\t\t\tctx.fill()\n\t\t\t\t}\n\t\t\t\tif (strokeColor) {\n\t\t\t\t// 因为边缘描边存在锯齿，最好指定使用 transparent 填充\n\t\t\t\tctx.setStrokeStyle(strokeColor)\n\t\t\t\t// 画出当前路径的边框\n\t\t\t\tctx.stroke()\n\t\t\t\t}\n\t\t\t}\n\t\t\t// 关闭一个路径\n\t\t\tctx.closePath()\n\t\t\t// 剪切，剪切之后的绘画绘制剪切区域内进行，需要save与restore 这个很重要 不然没办法保存\n\t\t\tctx.clip()\n\t\t},\n\t\t\n\t\t/**\n\t\t* canvas绘图相关，把文字转化成只能行数，多余显示省略号\n\t\t* ctx: 当前的canvas\n\t\t* text: 文本\n\t\t* contentWidth: 文本最大宽度\n\t\t* lineNumber: 显示几行\n\t\t*/\n\t\tcanvasMultiLineText(ctx, text, contentWidth, lineNumber) {\n\t\t\tvar textArray = text.split(\"\"); // 分割成字符串数组\n\t\t\tvar temp = \"\";\n\t\t\tvar row = [];\n\t\t\tfor (let i = 0; i < textArray.length; i++) {\n\t\t\t\tif (ctx.measureText(temp).width < contentWidth) {\n\t\t\t\ttemp += textArray[i];\n\t\t\t\t} else {\n\t\t\t\ti--; // 这里添加i--是为了防止字符丢失\n\t\t\t\trow.push(temp);\n\t\t\t\ttemp = \"\";\n\t\t\t\t}\n\t\t\t}\n\t\t\trow.push(temp);\n\t\t\n\t\t\t// 如果数组长度大于2，则截取前两个\n\t\t\tif (row.length > lineNumber) {\n\t\t\t\tvar rowCut = row.slice(0, lineNumber);\n\t\t\t\tvar rowPart = rowCut[1];\n\t\t\t\tvar test = \"\";\n\t\t\t\tvar empty = [];\n\t\t\t\tfor (var a = 0; a < rowPart.length; a++) {\n\t\t\t\tif (ctx.measureText(test).width < contentWidth) {\n\t\t\t\t\ttest += rowPart[a];\n\t\t\t\t} else {\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tempty.push(test); // 处理后面加省略号\n\t\t\t\tvar group = empty[0] + '...'\n\t\t\t\trowCut.splice(lineNumber - 1, 1, group);\n\t\t\t\trow = rowCut;\n\t\t\t}\n\t\t\treturn row;\n\t\t},\n\t\t// 获取海报的小程序码\n\t\tcodeImg(){\n\t\t\treturn new Promise((resolve,reject)=>{\n\t\t\t\trequest({\n\t\t\t\t\tmethod: 'get',\n\t\t\t\t\turl:'/spSupport/getwxacodeunlimit',\n\t\t\t\t\theader: { 'Content-Type': 'application/x-www-form-urlencoded' },\n\t\t\t\t\tdata: {\n\t\t\t\t\t\tversion:this.$parent.globalData.version,\n\t\t\t\t\t\tscene:`sku=${this.sku}`,\n\t\t\t\t\t\tpage:\"pages/product/detail\",\n\t\t\t\t\t\twidth:\"128px\",\n\t\t\t\t\t},\n\t\t\t\t}).then((res)=>{\n\t\t\t\t\tif (res.data.code==0) {\n\t\t\t\t\tconst fsm = wx.getFileSystemManager();\n\t\t\t\t\t\tconst FILE_BASE_NAME = 'tmp_img_src';\n\t\t\t\t\t\tlet filePath = `${wx.env.USER_DATA_PATH}/${FILE_BASE_NAME}.jpg`;\n\t\t\t\t\t\tfsm.writeFile({\n\t\t\t\t\t\t\tfilePath,\n\t\t\t\t\t\t\tdata: res.data.data,\n\t\t\t\t\t\t\tencoding: 'binary',\n\t\t\t\t\t\t\tsuccess() {\n\t\t\t\t\t\t\t\tresolve(filePath)\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tfail() {\n\t\t\t\t\t\t\t\tthis.canvasFlag=true;\n\t\t\t\t\t\t\t\tuni.showToast({title:'海报生成失败',duration:2000,icon:'none'});\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t});\n\t\t\t\t\t} else {\n\t\t\t\t\t\tuni.showToast({title: res.data.message, icon: 'none',duration: 2000,icon:'none'})\n\t\t\t\t\t}\n\t\t\t\t}).catch(()=>{\n\t\t\t\t\tthis.canvasFlag=true;\n\t\t\t\t\tuni.showToast({title:'海报生成失败',duration:2000,icon:'none'});\n\t\t\t\t})\n\t\t\t})\n\t\t},\n\t\t\n\t\t\n\t\t// 生成海报\n\t\tcreateCanvasImage() {\n\t\t\tconsole.log(this.posterObj,'posterObj')\n\t\t\t// this.canvasFlag=false;\n\t\t\t// this.deliveryFlag = false;//关闭分享的弹窗\n\t\t\tconsole.log(\"海报生成中\")\n\t\t\twx.showLoading({\n\t\t\t\ttitle: '海报生成中...'\n\t\t\t})\n\t\t\tlet _this = this;\n\t\t\tlet phoneData = wx.getSystemInfoSync();\n\t\t\tthis.phoneH = phoneData.windowHeight;\n\t\t\tthis.phoneW = phoneData.windowWidth;\n\t\t\tlet scaleW = this.phoneW/375;//按照苹果留 375*667比例 其他型号手机等比例缩放 显示\n\t\t\tlet scaleH = this.phoneH/667;//按照苹果留 375*667比例 其他型号手机等比例缩放 显示\n\t\t\tconsole.log(this.phoneH,this.phoneW)\n\t\t\tconst ctx = wx.createCanvasContext('myCanvas');\n\t\t\tlet url=this.posterObj.url;//商品主图\n\t\t\tlet zpPriceIcon=this.posterObj.icon//图标\n\t\t\tlet code=this.posterObj.code\n\t\t\tlet closeBtn='https://imgzuipin.oss-cn-hangzhou.aliyuncs.com/mp_zuipin/poster/close_btn.png'\n\t\tconsole.log(ctx)\n\t\tconsole.log(this)\n\n\t\t\tctx.draw()//清空原来的画图内容\n\t\t\tctx.save();\n\t\t\tthis.roundRect(ctx,50,40,(this.phoneW-100), (this.phoneH-120),10,'#fff','#fff');//绘制海报圆角背景白色的\n\t\t\tctx.restore(); //恢复之前保存的绘图上下文 恢复之前保存的绘图上下午即状态 可以继续绘制\n\t\t\tctx.save();\n\t\t\tthis.roundRect(ctx,50,40,(this.phoneW-100), (370)*scaleH,10,'#f7f7f7','#f7f7f7');//绘制海报圆角背景 上半截灰色的\n\t\t\tctx.restore();\n\t\t\t//将网络图片转成本地路径 商品图片\n\t\t    wx.getImageInfo({\n\t\t       src: url,\n\t\t       success(res) {\n\t\t\t\t\tctx.save();\n\t\t\t\t\t//覆盖绘制\n\t\t\t\t\t//问题：在微信小程序使用canvas绘制圆角图片时，微信调试工具正常显示，android真机都不显示。\n\t\t\t\t\t// 原因：因为ctx.clip()剪切区域使用的填充颜色是透明的，所以图片没出来。\n\t\t\t\t\t// 解决方案：将剪切区域设置成实体颜色就好了。\n\t\t\t\t\t_this.roundRect(ctx,(_this.phoneW-((_this.phoneW-130)))/2,55,(_this.phoneW-130), 250*scaleH,10,'#f7f7f7','#f7f7f7')//绘制图片圆角背景\n\t\t\t\t\tctx.drawImage(res.path, (_this.phoneW-((_this.phoneW-130)))/2,55,(_this.phoneW-130), 250*scaleH,10);//绘制图\n\t\t\t\t\tctx.restore(); //恢复之前保存的绘图上下文 恢复之前保存的绘图上下午即状态 可以继续绘制\n\t\t\t\t\tctx.draw(true)\n\t\t\t   } ,\n\t\t\t\tfail(){\n\t\t\t\t\t_this.canvasFlag=true;\n\t\t\t\t\tuni.showToast({title:'海报生成失败',duration:2000,icon:'none'});\n\t\t\t\t}\n\t\t\t})\n\t\t\t// 关闭按钮\n\t\t\twx.getImageInfo({\n\t\t        src: closeBtn,\n\t\t        success(res) {\n\t\t\t\t\tctx.drawImage(res.path,50+(_this.phoneW-100)+5,40,24, 24)\n\t\t\t\t\tctx.draw(true)\n\t\t      }  ,\n\t\t\t\tfail(){\n\t\t\t\t\t_this.canvasFlag=true;\n\t\t\t\t\tuni.showToast({title:'海报生成失败',duration:2000,icon:'none'});\n\t\t\t\t}\n\t\t\t})\n\t\t\t// 关闭按钮 end\n\t\t\t// 海报商品title\n\t\t\tsetTimeout(()=>{\n\t\t\t\tctx.setGlobalAlpha(1)//不透明\n\t\t\t\tctx.setFillStyle('#1c1c1c')//文字颜色：默认黑色\n\t\t\t\tctx.setFontSize(14)//设置字体大小，默认10\n\t\t\t\tctx.font = 'normal bold 14px sans-serif';\n\t\t\t\tlet text =this.posterObj.title;\n\t\t\t\tlet row = this.canvasMultiLineText(ctx,text,(this.phoneW-130),2);//计算绘制的2行文本\n\t\t\t\tlet contentTextY = 360; // 这段文字起始的y位置\n\t\t\t\tlet leftSpace = 65; // 这段文字起始的X位置\n\t\t\t\tlet textLineHeight = 18; // 一行文字加一行行间距\n\t\t\t\tfor (let b = 0; b < row.length; b++) {//一行一行绘制文本\n\t\t\t\t\tctx.fillText(row[b], leftSpace, (contentTextY+ textLineHeight * b-15)*scaleH, (this.phoneW-130));\n\t\t\t\t\tctx.draw(true)\n\t\t\t\t}\n\t\t\t},500)\n\t\t\t// 海报商品title end\n\t\t\t// 会员价 图标\n\t\t\twx.getImageInfo({\n\t\t         src: zpPriceIcon,\n\t\t         success(res) {\n\t\t\t\tctx.drawImage(res.path,65,380*scaleH,44, 15)\n\t\t\t\tctx.draw(true)\n\t\t      } ,\n\t\t\t\tfail(){\n\t\t\t\t\t_this.canvasFlag=true;\n\t\t\t\t\tuni.showToast({title:'海报生成失败',duration:2000,icon:'none'});\n\t\t\t\t}\n\t\t\t})\n\t\t\t// 会员价 图标 end\n\t\t\t//绘制价格\n\t\t\tctx.setFontSize(12)//设置字体大小，默认10\n\t\t\tctx.setFillStyle('#c00000')//文字颜色：默认黑色\n\t\t\tctx.font = 'normal 12px sans-serif';\n\t\t\tctx.fillText('￥', 110, 396*scaleH,60);\n\t\t\tctx.setFontSize(16)//设置字体大小，默认10\n\t\t\tlet zpPrice = this.posterObj.discountPrice;//会员价格\n\t\t\tlet orignPrice = this.posterObj.orignPrice;//市场价\n\t\t\t\n\t\t\tlet zpPriceW = ctx.measureText(zpPrice).width;//文本的宽度\n\t\t\tctx.fillText(zpPrice, 120, 396*scaleH,zpPriceW);\n\t\t\n\t\t\tctx.beginPath();//开始一个新的路径\n\t\t\tctx.setFontSize(10)//设置字体大小，默认10\n\t\t\tctx.setFillStyle('#999')//文字颜色：默认黑色\n\t\t\tlet orignPriceW = ctx.measureText(orignPrice).width//去掉市场价\n\t\t\tctx.fillText(`￥${orignPrice}`, 120+zpPriceW+5, 395*scaleH,orignPriceW); //5价格间距\n\t\t\tctx.moveTo(120+zpPriceW+5,392*scaleH);//设置线条的起始路径坐标\n\t\t\tctx.lineTo(120+zpPriceW+5+orignPriceW,392*scaleH);//设置线条的终点路径坐标\n\t\t\tctx.setStrokeStyle('#999')\n\t\t\tctx.stroke();//对当前路径进行描边\n\t\t\tctx.closePath();//关闭当前路径\n\t\t\t//绘制价格 end\n\t\t\t// this.codeImg().then((res)=>{\n\t\t\t\t// 小程序码\n\t\t\t\twx.getImageInfo({\n\t\t\t       src: code,\n\t\t\t       success(res) {\n\t\t\t\t\tctx.drawImage(res.path,(_this.phoneW-70)/2,430*scaleH, 70,70)\n\t\t\t\t\tctx.draw(true)\n\t\t\t      },\n\t\t\t\t\tfail(){\n\t\t\t\t\t\t_this.canvasFlag=true;\n\t\t\t\t\t\tuni.showToast({title:'海报生成失败',duration:2000,icon:'none'});\n\t\t\t\t\t\t\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t// });\n\t\t\t\n\t\t\t// 小程序码end\n\t\t\t// 小程序的名称\n\t\t\tctx.setFontSize(14)\n\t\t\tctx.setFillStyle('#2f1709')//文字颜色：默认黑色\n\t\t\tctx.font = 'normal bold 14px sans-serif';\n\t\t\tctx.fillText('小程序的名称', (_this.phoneW-90)/2, 530*scaleH,90);\n\t\t\t// 小程序的名称end\n\t\t\t// 长按/扫描识别查看商品\n\t\t\tctx.setFontSize(14)\n\t\t\tctx.setFillStyle('#ff5f33')//文字颜色：默认黑色\n\t\t\tctx.font = 'normal 14px sans-serif';\n\t\t\tctx.fillText('长按/扫描识别查看商品', (_this.phoneW-140)/2, 550*scaleH,140);\n\t\t\t// 长按/扫描识别查看商品end\n\t\t\t//绘制保存按钮\n\t\t\tctx.save(); \n\t\t\tthis.roundRect(ctx,(this.phoneW-160)/2,(this.phoneH-55),160, 36,18,'#ff3600','#ff6a00','btn')\n\t\t\tctx.restore(); \n\t\t\tctx.setFontSize(14)\n\t\t\tctx.setFillStyle('#fff')//文字颜色：默认黑色\n\t\t\tctx.font = 'normal bold 14px sans-serif';\n\t\t\tctx.fillText('保存图片', (_this.phoneW-58)/2, (this.phoneH-33),58);\n\t\t\t//绘制保存按钮 end\n\t\t\twx.hideLoading();\n\t\t},\n\t\t\n\t\t// 保存到系统相册\n\t\tsaveCanvasImage(){\n\t\t\tconsole.log('点击了保存')\n\t\t\twx.showLoading({\n\t\t\t\ttitle: '保存中...'\n\t\t\t})\n\t\t\tlet _this = this;\n\t\t\t// 1-把画布转化成临时文件\n\t\t\tuni.canvasToTempFilePath({\n\t\t\tx: 50,\n\t\t\ty: 40,\n\t\t\twidth:(this.phoneW-100),    // 画布的宽\n\t\t\theight: (this.phoneH-120),   // 画布的高\n\t\t\tdestWidth: (this.phoneW-100)*5,\n\t\t\tdestHeight: (this.phoneH-120)*5,\n\t\t\tcanvasId: 'myCanvas',\n\t\t\tsuccess(res) {\n\t\t\t\t// 2-保存图片至相册\n\t\t\t\tuni.saveImageToPhotosAlbum({\n\t\t\t\tfilePath: res.tempFilePath,\n\t\t\t\tsuccess(res2) {\n\t\t\t\t\twx.hideLoading();\n\t\t\t\t\tuni.showToast({title: '图片保存成功，可以去分享啦~', duration: 2000})\n\t\t\t\t\t_this.canvasCancelEvn();\n\t\t\t\t},\n\t\t\t\tfail() {\n\t\t\t\t\tuni.showToast({title: '保存失败，稍后再试', duration: 2000,icon:'none'})\n\t\t\t\t\twx.hideLoading();\n\t\t\t\t}\n\t\t\t\t})\n\t\t\t},\n\t\t\tfail() {\n\t\t\t\tuni.showToast({title: '保存失败，稍后再试',duration: 2000,icon:'none'})\n\t\t\t\twx.hideLoading();\n\t\t\t}\n\t\t\t})\n\t\t},\n\t\t// 取消海报\n\t\tcanvasCancelEvn(){\n\t\t\tconsole.log()\n\t\t\tthis.$emit('cancel',true)\n\t\t}\n\t}\n}\n","import mod from \"-!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--8-oneOf-1-0!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-1!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\index.js??ref--8-oneOf-1-2!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--8-oneOf-1-3!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\sass-loader\\\\lib\\\\loader.js??ref--8-oneOf-1-4!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-5!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./hch-poster.vue?vue&type=style&index=0&lang=scss&\"; export default mod; export * from \"-!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--8-oneOf-1-0!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-1!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\index.js??ref--8-oneOf-1-2!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--8-oneOf-1-3!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\sass-loader\\\\lib\\\\loader.js??ref--8-oneOf-1-4!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-5!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./hch-poster.vue?vue&type=style&index=0&lang=scss&\"","// extracted by mini-css-extract-plugin"],"sourceRoot":""}