(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/invite/invite"],{"0c1b":function(n,e,t){"use strict";var o=t("f797"),i=t.n(o);i.a},"2d74":function(n,e,t){"use strict";var o={"uni-icons":()=>Promise.all([t.e("common/vendor"),t.e("components/uni-icons/uni-icons")]).then(t.bind(null,"77be"))},i=function(){var n=this,e=n.$createElement;n._self._c},s=[];t.d(e,"b",function(){return i}),t.d(e,"c",function(){return s}),t.d(e,"a",function(){return o})},"4ffd":function(n,e,t){"use strict";t.r(e);var o=t("2d74"),i=t("a399");for(var s in i)"default"!==s&&function(n){t.d(e,n,function(){return i[n]})}(s);t("0c1b");var c,u=t("f0c5"),a=Object(u["a"])(i["default"],o["b"],o["c"],!1,null,null,null,!1,o["a"],c);e["default"]=a.exports},"9eff":function(n,e,t){"use strict";(function(n){t("0e61"),t("921b");o(t("66fd"));var e=o(t("4ffd"));function o(n){return n&&n.__esModule?n:{default:n}}n(e.default)}).call(this,t("543d")["createPage"])},a399:function(n,e,t){"use strict";t.r(e);var o=t("d479"),i=t.n(o);for(var s in o)"default"!==s&&function(n){t.d(e,n,function(){return o[n]})}(s);e["default"]=i.a},d479:function(n,e,t){"use strict";(function(n){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=function(){return Promise.all([t.e("common/vendor"),t.e("components/uni-icons/uni-icons")]).then(t.bind(null,"77be"))},i=function(){return t.e("components/uni-section/uni-section").then(t.bind(null,"c7fb"))},s={components:{uniIcons:o,uniSection:i},data:function(){return{imageVis:!1,imgUrl:"",providerList:[],show1:!1,isDom:!0,canvasUrl:"",cover:"https://s1.ax1x.com/2020/03/16/8JuNw9.png"}},onShareAppMessage:function(n){return"button"===n.from&&console.log(n.target),{imgUrl:this.imgUrl}},onLoad:function(){var e=this;n.getProvider({service:"share",success:function(n){for(var t=[],o=0;o<n.provider.length;o++)switch(n.provider[o]){case"weixin":t.push({name:"分享到微信好友",id:"weixin"}),t.push({name:"分享到微信朋友圈",id:"weixin",type:"WXSenceTimeline"});break;case"qq":t.push({name:"分享到QQ",id:"qq"});break;default:break}e.providerList=t},fail:function(n){console.log("获取分享通道失败",n)}})},methods:{preview:function(){wx.previewImage({current:this.canvasUrl,urls:[this.canvasUrl]})},closeimg:function(){this.imageVis=!1},getImg:function(){var e=this;this.imgUrl=n.getStorageSync("login").spread_code,this.imageVis=!0;n.getSystemInfoSync();var t=n.createCanvasContext("firstCanvas");n.getImageInfo({src:e.cover,success:function(o){console.log(o);var i=o.path;t.drawImage(i,0,0,n.upx2px(500),n.upx2px(878)),t.fillStyle="red",t.fillRect(n.upx2px(165),n.upx2px(650),n.upx2px(200),n.upx2px(200)),t.drawImage(e.imgUrl,n.upx2px(200),n.upx2px(200),n.upx2px(200),n.upx2px(200)),t.font="13px Arial",t.fillStyle="#000",t.fillText("长按保存二维码",n.upx2px(508),n.upx2px(990)),t.draw(!1,function(){n.canvasToTempFilePath({x:0,y:0,width:375,height:n.upx2px(1020),destWidth:375,destHeight:n.upx2px(1020),canvasId:"firstCanvas",success:function(e){n.saveImageToPhotosAlbum({filePath:e.tempFilePath,success:function(){console.log("save success")}})},fail:function(e){console.log(e),n.showToast({title:"生成海报失败",icon:"none"})}})})},fail:function(n){console.log(n)}})}},save:function(){var n=this;wx.showToast({icon:"loading",title:"正在保存图片",duration:1e3}),wx.getSetting({success:function(e){e.authSetting["scope.writePhotosAlbum"]?n.savePhoto():wx.authorize({scope:"scope.writePhotosAlbum",success:function(){n.savePhoto()},fail:function(){console.log("用户拒绝授权，跳转到设置页面"),n.show1=!0}})}})},savePhoto:function(){var e=this;wx.downloadFile({url:e.imgUrl,success:function(t){console.log(t),wx.saveImageToPhotosAlbum({filePath:t.tempFilePath,success:function(t){console.log(t),n.showToast({title:"保存成功",icon:"success",duration:1e3}),e.imageVis=!1}})},fail:function(t){console.log(e.imgUrl),console.log(t),n.showToast({title:"保存失败",icon:"none"})}})}};e.default=s}).call(this,t("543d")["default"])},f797:function(n,e,t){}},[["9eff","common/runtime","common/vendor"]]]);