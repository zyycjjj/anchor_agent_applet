(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/authorise/authorise"],{"0b40":function(n,e,o){},1553:function(n,e,o){"use strict";(function(n){o("0e61"),o("921b");t(o("66fd"));var e=t(o("33da"));function t(n){return n&&n.__esModule?n:{default:n}}n(e.default)}).call(this,o("543d")["createPage"])},"33da":function(n,e,o){"use strict";o.r(e);var t=o("a270"),r=o("a9ea");for(var i in r)"default"!==i&&function(n){o.d(e,n,function(){return r[n]})}(i);o("e0fe");var u,a=o("f0c5"),c=Object(a["a"])(r["default"],t["b"],t["c"],!1,null,"be368d62",null,!1,t["a"],u);e["default"]=c.exports},a270:function(n,e,o){"use strict";var t={"uni-swiper-dot":()=>o.e("components/uni-swiper-dot/uni-swiper-dot").then(o.bind(null,"3f23"))},r=function(){var n=this,e=n.$createElement;n._self._c},i=[];o.d(e,"b",function(){return r}),o.d(e,"c",function(){return i}),o.d(e,"a",function(){return t})},a9ea:function(n,e,o){"use strict";o.r(e);var t=o("f869"),r=o.n(t);for(var i in t)"default"!==i&&function(n){o.d(e,n,function(){return t[n]})}(i);e["default"]=r.a},e0fe:function(n,e,o){"use strict";var t=o("0b40"),r=o.n(t);r.a},f869:function(n,e,o){"use strict";(function(n){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=o("5820"),r=function(){return o.e("components/neil-modal/neil-modal").then(o.bind(null,"3a25"))},i=function(){return o.e("components/uni-swiper-dot/uni-swiper-dot").then(o.bind(null,"3f23"))},u=function(){return o.e("components/uni-section/uni-section").then(o.bind(null,"c7fb"))},a={components:{neilModal:r,uniSwiperdot:i,uniSection:u},data:function(){return{background:["color1","color2","color3"],indicatorDots:!0,autoplay:!1,show2:!1,userInfo:{},show1:!0,pid:"",info:[{url:"https://ww1.yunjiexi.club/2020/03/21/bW0EL.png",content:"1"},{url:"https://ww1.yunjiexi.club/2020/03/21/bPi3b.png",content:"2"},{url:"https://ww1.yunjiexi.club/2020/03/21/bPx79.png",content:"3"}],dotsStyles:{backgroundColor:"rgba(83, 200, 249,0.3)",border:"1px rgba(83, 200, 249,0.3) solid",color:"#fff",selectedBackgroundColor:"rgba(83, 200, 249,0.9)",selectedBorder:"1px rgba(83, 200, 249,0.9) solid",bottom:100},current:0}},onLoad:function(e){this.pid=Number(n.getStorageSync("pid"))},methods:{change:function(n){this.current=n.detail.current},callback:function(n){n.detail.authSetting["scope.userInfo"]&&(this.show1=!0)},modalTap:function(n){this.show2=!0},cancelAuth:function(){this.show2=!1},getUserInfo:function(){var e=this;n.getUserInfo({provider:"weixin",success:function(n){console.log("getUserInfo success",n),e.userInfo=n.userInfo},fail:function(n){console.log("getUserInfo fail",n);var e=n.errMsg;~e.indexOf("uni.login")&&(e="请在登录页面完成登录操作")}})},mpGetUserInfo:function(e){if("getUserInfo:ok"===e.detail.errMsg){this.userInfo=e.detail.userInfo;var o=this;n.login({provider:"weixin",success:function(r){n.setStorageSync("code",r.code),n.setStorageSync("pid",Number(n.getStorageSync("pid"))),o.userInfo.code=r.code,n.setStorageSync("userinfo",e.detail.userInfo),(0,t.request)({url:"/api/user/MiniProgramLogin",data:{code:o.userInfo.code,nickname:o.userInfo.nickName,headimage:o.userInfo.avatarUrl,gender:o.userInfo.gender,province:o.userInfo.province,city:o.userInfo.city,country:o.userInfo.country,pid:o.pid},method:"POST"}).then(function(e){console.log(e),1!=e.data.code?n.showModal({title:e.data.errMsg,showCancel:!1}):(n.showModal({title:e.data.errMsg,showCancel:!1}),n.setStorageSync("token",e.data.data.userinfo.token),n.setStorageSync("login",e.data.data.userinfo),console.log(e.data.data.userinfo),n.switchTab({url:"/pages/anchor/anchor"}))})}})}else this.show1=!1}}};e.default=a}).call(this,o("543d")["default"])}},[["1553","common/runtime","common/vendor"]]]);